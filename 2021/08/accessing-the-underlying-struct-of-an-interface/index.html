<!doctype html><html lang=en-us data-theme>
<head>
<meta charset=utf-8>
<meta name=HandheldFriendly content="True">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=referrer content="no-referrer-when-downgrade">
<title>Accessing the underlying struct of an interface - wtf go</title>
<meta name=description content="Sometimes go is f#!king hard">
<link rel=icon type=image/x-icon href=https://golang.wtf/favicon.ico>
<link rel=apple-touch-icon-precomposed href=https://golang.wtf/favicon.png>
<link rel=stylesheet href=https://golang.wtf/css/style.min.eaefaf3ba5a542914ed7ca13efe63109f01475ec4b76830e3c925c72dc07ff27.css integrity="sha256-6u+vO6WlQpFO18oT7+YxCfAUdexLdoMOPJJcctwH/yc=">
<meta property="og:title" content="Accessing the underlying struct of an interface">
<meta property="og:description" content="Converting from an interface to a structure is an important tool with a slightly obtuse syntax">
<meta property="og:type" content="article">
<meta property="og:url" content="https://golang.wtf/2021/08/accessing-the-underlying-struct-of-an-interface/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-10T08:22:39-07:00">
<meta property="article:modified_time" content="2021-08-10T08:22:39-07:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Accessing the underlying struct of an interface">
<meta name=twitter:description content="Converting from an interface to a structure is an important tool with a slightly obtuse syntax">
</head>
<body>
<a class=skip-main href=#main>Skip to main content</a>
<div class=container>
<header class=common-header>
<div class=header-top>
<div>
<h1 class=site-title>
<a class=site-url href=/><img class=logo alt=logo src=/logo.png> wtf go</a>
</h1>
</div>
<div class=nav-div>
<nav>
<a href=https://golang.wtf/posts/ title=Archive>Archive</a>
<a href=https://golang.wtf/about/ title=About>About</a>
</nav>
</div>
<div>
<ul class=social-icons>
<li>
<a href=https://github.com/wwsean08/wtfgo title=Github rel=me>
<span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
</a>
</li>
<li>
<a href=/index.xml title=Rss rel=me>
<span class=inline-svg><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" fill="currentcolor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg>
</span>
</a>
</li>
</ul>
</div>
</div>
</header>
<main id=main tabindex=-1>
<article class="post h-entry">
<header class=post-header>
<h1 class="p-name post-title">Accessing the underlying struct of an interface</h1>
</header>
<div class="content e-content">
<p>Converting between an <code>interface</code> and a <code>struct</code> can be done leveraging type assertions in Go. Let&rsquo;s take the following <a href=https://play.golang.org/p/EhsiuwZ89IH>example code</a> and see how it would work:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;math&#34;</span>
)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>shape</span> <span style=color:#66d9ef>interface</span> {
	<span style=color:#a6e22e>area</span>() <span style=color:#66d9ef>float64</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>rectangle</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>length</span> <span style=color:#66d9ef>float64</span>
	<span style=color:#a6e22e>width</span>  <span style=color:#66d9ef>float64</span>
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>circle</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>radius</span> <span style=color:#66d9ef>float64</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#a6e22e>rectangle</span>) <span style=color:#a6e22e>area</span>() <span style=color:#66d9ef>float64</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>width</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#a6e22e>circle</span>) <span style=color:#a6e22e>area</span>() <span style=color:#66d9ef>float64</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Pi</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Pow</span>(<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>radius</span>, <span style=color:#ae81ff>2</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#75715e>// Create a slice of shapes to iterate over
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>shapes</span> <span style=color:#f92672>:=</span> []<span style=color:#a6e22e>shape</span>{
		<span style=color:#a6e22e>rectangle</span>{<span style=color:#a6e22e>length</span>: <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span>: <span style=color:#ae81ff>2</span>},
		<span style=color:#a6e22e>circle</span>{<span style=color:#a6e22e>radius</span>: <span style=color:#ae81ff>3</span>},
	}

	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>item</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>shapes</span> {
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>rect</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>item</span>.(<span style=color:#a6e22e>rectangle</span>); <span style=color:#a6e22e>ok</span> {
			<span style=color:#75715e>// Check if the item is a rectangle, if it is, then enter this if block
</span><span style=color:#75715e></span>			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;I&#39;m a rectangle&#34;</span>)
			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;length: %f, width %f, area: %f\n&#34;</span>, <span style=color:#a6e22e>rect</span>.<span style=color:#a6e22e>length</span>, <span style=color:#a6e22e>rect</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>area</span>())
		} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>circ</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>item</span>.(<span style=color:#a6e22e>circle</span>); <span style=color:#a6e22e>ok</span> {
			<span style=color:#75715e>// Check if the item is a cirlce, if it is, then enter this if block
</span><span style=color:#75715e></span>			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;I&#39;m a circle&#34;</span>)
			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;radius: %f, area: %f\n&#34;</span>, <span style=color:#a6e22e>circ</span>.<span style=color:#a6e22e>radius</span>, <span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>area</span>())
		} <span style=color:#66d9ef>else</span> {
			<span style=color:#75715e>// If it&#39;s anything else, we aren&#39;t sure what it is
</span><span style=color:#75715e></span>			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;I don&#39;t know what I am&#34;</span>)
		}
	}
}
</code></pre></div><p>When running this code you should see the following output:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>I&#39;m a rectangle
length: 2.000000, width 2.000000, area: 4.000000
I&#39;m a circle
radius: 3.000000, area: 28.274334
</code></pre></div><p>As you can see in the above example you can leverage type assertions to get access to the underlying data of an object. This can be extremely useful for things like custom errors, where you might have additional information, like what HTTP status code to return, or more detailed information on the error.</p>
</div>
<div class=post-info>
<div class="post-date dt-published">2021-08-10</div>
<a class="post-hidden-url u-url" href=https://golang.wtf/2021/08/accessing-the-underlying-struct-of-an-interface/>https://golang.wtf/2021/08/accessing-the-underlying-struct-of-an-interface/</a>
<div class=post-taxonomies>
</div>
<div class=author>
<div class=author-box>
<img alt=Author class=author-img src=/media/authors/wwsean08.jpg>
<h4 class=author-name><a href=https://sean.dev class="p-name p-author" rel=me>Sean Smith</a></h4>
<p class=author-bio>Sean Smith is a Software Engineer at Discovery Inc working in release tooling to help developers make better products, faster.</p>
</div>
</div>
</div>
</article>
<div class="pagination post-pagination">
<div class="left pagination-item">
<a href=/2021/08/how-to-embed-static-content-into-your-go-binaries/>How to embed static content into your go binaries</a>
</div>
<div class="right pagination-item">
<a href=/2021/08/unmarshal-json-data-in-non-standard-ways/>Unmarshal JSON data in non-standard ways</a>
</div>
</div>
</main>
<footer class=common-footer>
<div class=common-footer-bottom>
<div class=copyright>
<p>© Sean Smith & Contributors, 2021<br>
Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br>
<div>
This websites content and code are licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA-4.0 License</a>
</div>
</p>
</div>
<div class=theme-wrapper>
<button class=theme-switcher>
🌙
</button>
</div>
<script>const STORAGE_KEY='user-color-scheme',defaultTheme="auto";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia('(prefers-color-scheme: dark)');const autoChangeScheme=a=>{currentTheme=a.matches?'dark':'light',document.documentElement.setAttribute('data-theme',currentTheme),changeButtonText()};document.addEventListener('DOMContentLoaded',function(){switchButton=document.querySelector('.theme-switcher'),currentTheme=detectCurrentScheme(),currentTheme=='dark'&&document.documentElement.setAttribute('data-theme','dark'),currentTheme=='auto'&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),changeButtonText(),switchButton.addEventListener('click',switchTheme,!1)});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light':'light'}function changeButtonText(){switchButton.textContent=currentTheme=='dark'?"☀️":"🌙"}function switchTheme(a){currentTheme=='dark'?(localStorage.setItem(STORAGE_KEY,'light'),document.documentElement.setAttribute('data-theme','light'),currentTheme='light'):(localStorage.setItem(STORAGE_KEY,'dark'),document.documentElement.setAttribute('data-theme','dark'),currentTheme='dark'),changeButtonText()}</script>
</div>
<p class="h-card vcard">
<a href=https://golang.wtf class="p-name u-url url fn" rel=me>Sean Smith & Contributors</a>
</p>
</footer>
</div>
</body>
</html>